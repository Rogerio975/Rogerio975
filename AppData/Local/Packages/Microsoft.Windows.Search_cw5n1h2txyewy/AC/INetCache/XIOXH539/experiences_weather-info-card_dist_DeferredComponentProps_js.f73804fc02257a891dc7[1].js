"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["experiences_weather-info-card_dist_DeferredComponentProps_js"],{75668:function(e,t,n){n.r(t),n.d(t,{createEplantProps:function(){return v},createHideCardDialogProps:function(){return O},createHideCardReminderProps:function(){return H},createLocationListProps:function(){return P},createLocationTipProps:function(){return I},createSettingMenuProps:function(){return A},createToastProps:function(){return b},createtWeatherEditSettingProps:function(){return D}});var o=n(30511),r=n(41726),i=n(94718),a=n(56242),c=n(99690),s=n(80354),l=n(94842),d=n(21802),u=n(70943),f=n(59420),p=n(62501),g=n(39230),h=n(92786),m=n(6583),L=n(70376),T=n(31307),y=n(68929),S=n(22640),w=n(20600);function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C.apply(this,arguments)}function v(e,t){if(!e||!t)return null;const{config:n}=e;return n.enableEPlant?{localizedStrings:n.localizedStrings.ePlant,eplantIcon:n.eplantIcon,cardContentType:e.cardContentType,dailyCheckInProps:e.getCurrentState().eplantDailyCheckIn,ePlantStatus:e.ePlantStatus,onHeader:!1}:void 0}function D(e,t){if(!e||!t)return null;const n=e.config.localizedStrings;return C(C(C({},e.telemetry.settingsTelemetry),{},{isHalfCard:!1,multiLocationV2:!0,hideUnitSettings:!0,cancelSettingsHandler:k(e),autoSuggestHandler:x(e),geoCodeHandler:N(e),detectMyLocationHandler:F(e),setLocSearchVisible:E(e),addFavoriteLocation:M(e),removeFavoriteLocation:$(e),setHomeLocation:z(e),closeSettings:R(e)},n.settings),{},{addLocation:n.menuItemEditLocation,locationEditV2:!0,detectedLocation:t.detectedLocation,suggestedLocations:t.autoSuggestions,detectionState:t.weatherData.locationDetectionSetting,unit:t.weatherData.unit,autoSuggestState:t.autoSuggestState,currentLocation:t.currentLocation,showSuggestionInTwoLines:!0,followedLocations:t.favoriteLocations,homeLocation:t.homeLocation,source:"wea_",strings:{myLocation:n.myLocation,manageLocations:n.manageLocations,removeLocationTooltip:n.removeLocationTooltip,disableRemoveLocationTooltip:n.disableRemoveLocationTooltip,setPrimaryLocation:n.setPrimaryLocation,searchListHeader:n.searchListHeader}})}function O(e,t){if(!e||!t)return null;const{config:n,childComponentInstanceList:o,telemetry:r}=e;let i;t.ocvFeedbackDialogExpInstanceId&&o&&(i=o[t.ocvFeedbackDialogExpInstanceId]);return C(C(C({dialogType:t.dialogType},r.hideCardDialogTelemetry),{},{wrongLocationUnitHandler:()=>{Q(e,!1),e.switchToEditCard(null)},reportIssueHandler:Z(e),hideHandler:"HideNotification"===t.dialogType?()=>{var n,o;return async function(e,t){const n=e.getCurrentState().currentLocation;let o=t||"";o.startsWith("wxnwtsns")?o="wxnwtsns":o.startsWith("wxwf")&&(o="wxwf");const r=await e.weatherDataConnector.pdpserviceClient.disableWeatherCardNotification(o,!0,`${n.latitude},${n.longitude}`);return r}(e,null===(n=t.weatherData)||void 0===n||null===(o=n.displayedContent)||void 0===o?void 0:o.id)}:W(e),cancelHandler:_(e)},n.localizedStrings.hideCardDialog),{},{ocvFeedbackDialogComponent:i})}function H(e,t){if(!e||!t)return null;const{config:n,telemetry:i}=e;let a;return n.useGlobalSettingsUrl?(a=(0,o.rP)(),a=`${a}?ocid=${(0,r.ku)()}`):a="/personalize/settings",C(C(C({},i.hideCardReminderTO),n.localizedStrings.hideCardReminder),{},{manageCardLink:a,linksInNewTabProps:S.wv,isHalfCard:q(t)})}function P(e,t){if(!e||!t)return null;const{config:n,telemetry:o}=e,r=n.localizedStrings;return{editLocaTO:o.editLocaTO.render(),favorLocaTO:o.favorLocaTO.render(),defaultLocaTO:o.defaultLocaTO.render(),detectedLocaTO:o.detectedLocaTO.render(),updateShowLocationListHandler:e.handlers().updateShowLocationListHandler,currentLocation:t.currentLocation,updateCurrentLocationHandler:V(e),temporaryLocationChange:G(e),followedLocations:U(t),strings:{menuItemEditLocation:r.menuItemEditLocation,myLocation:r.myLocation,manageLocations:r.manageLocations,removeLocationTooltip:r.removeLocationTooltip,disableRemoveLocationTooltip:r.disableRemoveLocationTooltip,setPrimaryLocation:r.setPrimaryLocation,setAsPrimaryTooltip:r.setAsPrimaryTooltip,isAutoDetect:r.isAutoDetect,locationChangedTooltip:r.locationChangedTooltip},showEditCardHandler:X(e),detectedLocation:e.detectedLocationServer,homeLocation:t.homeLocation}}function b(e,t){if(!e||!t)return null;const{config:n,telemetry:o}=e;return{updateCurrentLocationHandler:V(e),updateShowToast:j(e),temporaryLocationChange:G(e),showEditCardHandler:X(e),switchToAutodetectedTO:o.switchToAutodetectedTO.render(),closeNotificationTO:o.closeNotificationTO.render(),showToast:t.showToast,toastType:t.toast,detectedLocation:e.detectedLocationServer,currentLocation:t.currentLocation,followedLocations:U(t),homeLocation:t.homeLocation,isFloatSettingsCard:B(t),isHalfCard:q(t),strings:n.localizedStrings,shortLocationName:t.shortLocationName}}function A(e,t){if(!e||!t)return null;const{config:n,telemetry:i,handlers:a}=e,c=n.localizedStrings,l={key:"edit",text:c.manageLocations,onSelect:X(e),icon:p.mec,telemetryTag:i.forecastTelemetry.editTO&&i.forecastTelemetry.editTO.render()},d={key:"fahrenheit",text:c.fahrenheit,onSelect:()=>J(e,s.a.Fahrenheit),icon:p.cq0,suffixIcon:t.weatherData.unit===s.a.Fahrenheit?p.LYZ:null,telemetryTag:i.forecastTelemetry.fahrenheitTO&&i.forecastTelemetry.fahrenheitTO.render()},u={key:"celsius",text:c.celsius,onSelect:()=>J(e,s.a.Celsius),icon:p.cSN,suffixIcon:t.weatherData.unit===s.a.Celsius?p.LYZ:null,telemetryTag:i.forecastTelemetry.celsiusTO&&i.forecastTelemetry.celsiusTO.render()},f=i.forecastTelemetry.hideTO,g={key:"hideCard",icon:p.pIY,text:c.hideWeatherCard,onSelect:()=>function(e){w.p.showHideDialogByType.getActionSender(e).send("HideCard"),Q(e,!0)}(e),telemetryTag:f&&f.render()},h={key:"hideNotification",icon:p.pIY,text:c.hideThisNotification,onSelect:()=>function(e){w.p.showHideDialogByType.getActionSender(e).send("HideNotification"),Q(e,!0)}(e),telemetryTag:f&&f.render()},m={key:"more",text:c.moreSettings,onSelect:()=>function(e){let t;e.config.useGlobalSettingsUrl?(t=(0,o.rP)(),t=`${t}?ocid=${(0,r.ku)()}`):t="/personalize/settings";window.open(t,"_blank")}(e),icon:p.mgj,telemetryTag:i.forecastTelemetry.moreTO&&i.forecastTelemetry.moreTO.render()},L=[l];return L.push(d),L.push(u),L.push(g),(e.isTkRt||e.config.mockTkRt)&&L.push(h),L.push(m),{menuItems:L,menuButtonLabel:c.menuButtonLabel}}function I(e,t){if(!e||!t)return null;const{config:n,telemetry:o}=e,r=n.localizedStrings;return{showEditCardHandler:X(e),closeLocationTipHandler:K(e),yesString:r.yesString,noString:r.noString,closeString:r.close,locationTipV2:r.locationTipV2,locaTipTO:o.forecastTelemetry.locaTipTO,locaTipYesTO:o.forecastTelemetry.locaTipYesTO,locaTipNoTO:o.forecastTelemetry.locaTipNoTO,locaTipCloseTO:o.forecastTelemetry.locaTipCloseTO}}function k(e){return()=>{w.p.switchToForecast.getActionSender(e).send()}}function x(e){return async t=>{const n=await e.weatherDataConnector.getAutoSuggestResponse(t);null!==n&&w.p.fetchWeatherAutoSuggestSuccess.getActionSender(e).send(n)}}function N(e){return async t=>e.weatherDataConnector.geocodeLocation(t)}function F(e){return async()=>{e.weatherDataConnector.getLocalizedDetectedLocation().then((t=>{w.p.currentLocationDetected.getActionSender(e).send(t)}))}}function E(e){return t=>{w.p.updateLocSearchListVisible.getActionSender(e).send(t)}}function M(e){return async t=>{if(!await e.weatherDataConnector.addFollowLocation(t))return;c.M0&&c.M0.addOrUpdateTmplProperty(S.YC,"true"),t.displayName||(t.displayName=(0,l.Gf)(t));const n=e.getCurrentState().favoriteLocations||[],o=[t].concat(n).slice(0,d.E9);w.p.updateFollowedLocations.getActionSender(e).send(o),window.setTimeout((()=>e.updateToast(S.pC.LocationFollowed)),100)}}function $(e){return async t=>{if(!await e.weatherDataConnector.removeNotPrimaryLocation(t))return;const n=(e.getCurrentState().favoriteLocations||[]).filter((e=>!(0,u.eu)(e,t)));w.p.updateFollowedLocations.getActionSender(e).send(n)}}function z(e){return async t=>{await e.weatherDataConnector.setPrimaryLocation(t)&&(c.M0&&c.M0.addOrUpdateTmplProperty(S.ZZ,"true"),t.displayName||(t.displayName=(0,l.Gf)(t)),e.saveHomeLocationToState(t),e.updateToast(S.pC.PrimaryChanged))}}function R(e){return(t,n)=>{t?n?Y(e,null,t,null):G(e)(t,!0):w.p.switchToForecast.getActionSender(e).send()}}function W(e){return async()=>{w.p.updateDisplayHideCardReminder.getActionSender(e).send(),Q(e,!1);const t=await e.weatherDataConnector.pdpserviceClient.enableDisableWeatherCard(!1);return t&&e.refreshFeedHandler(),t}}function _(e){return t=>{Q(e,!1),t&&e.refreshFeedHandler()}}function V(e){return async t=>{Y(e,2,t,null)}}async function Y(e,t,n,o){(0,g.bY)(h.T.WeatherChange),(0,i.$o)().setItem(S.nc,`${Date.now()}`),e.weatherDataConnector.upLocation(n,!1).then((()=>{m.P.startAnimation.getGlobalActionSender().send("started"),L.x.requestContentAndWebViewRefresh.getActionSender(e).send()}))}function j(e){return(t,n=!1)=>{if(!t){const t=e.getCurrentState().toast;t===S.pC.SwitchLocation?(c.M0&&c.M0.sendClientLogEvent({message:`Toast of switch to ${f.getDisplayName(e.getCurrentState().detectedLocation)} closed automatically`,type:"information"}),e.declinedLocations.push(e.getCurrentState().detectedLocation),(0,i.$o)().setItem(S.rd,JSON.stringify(e.declinedLocations))):t===S.pC.NoPrimaryLocation&&n&&(0,i.$o)().setItem(S.zd,`${S.F+1}`)}w.p.updateShowToast.getActionSender(e).send(t)}}function G(e){return async(t,n)=>{w.p.switchToForecast.getActionSender(e).send(),e.isTemproaryLocationChange=!0,e.temproaryLocationChangeToast=n;await e.weatherDataConnector.updateWeather(t,{useInputLocation:!0})||(e.isTemproaryLocationChange=!1),n||j(e)(!1)}}function U(e){return e.favoriteLocations}function q(e){return!e.cardSize||e.cardSize!==a.X.Size1Wx6H}function B(e){return e.cardRenderState==y.P.EditCard}async function J(e,t){e.weatherDataConnector.updateSettings(null,null,t,!0,!0).then((()=>{L.x.requestContentAndWebViewRefresh.getActionSender(e).send()}))}function Z(e){return()=>{Q(e,!1),e.ocvFeedbackDialogConnector&&T.T.makeDialogVisible.getActionSender(e.ocvFeedbackDialogConnector).send(!0)}}function Q(e,t){w.p.updateDisplayHideCardDialog.getActionSender(e).send(t)}function X(e){return t=>{w.p.updateShowLocationList.getActionSender(e).send(!1),w.p.launchEditCard.getActionSender(e).send(!1)}}function K(e){return t=>{w.p.updateLocationTipShow.getActionSender(e).send(!1);const n=Math.floor(Date.now()/86400/1e3);(0,i.$o)().setItem(S.hx,`${n}`)}}},21802:function(e,t,n){n.d(t,{By:function(){return l},E9:function(){return d},LV:function(){return p},Oj:function(){return S},UE:function(){return L},Vn:function(){return T},gw:function(){return w},mZ:function(){return g},qF:function(){return m},qq:function(){return f},sE:function(){return y},xe:function(){return C}});var o=n(10364),r=n(59420),i=n(48200),a=n(41361),c=n(94718),s=n(94842);const l=10,d=a.jG.isMobile?20:10;function u(e){return!!e&&"null"!==e&&"undefined"!==e&&"false"!==e}function f(e,t=l){if(e.home&&((0,i.Mv)(e.favorites,e.home),(0,i.Mv)(e.recents,e.home)),e.favorites){e.favorites=p(e.favorites),e.favorites=e.favorites.slice(0,t);for(let t=0,n=e.favorites.length;t<n;++t)(0,i.Mv)(e.recents,e.favorites[t])}else void 0===e.favorites&&(e.favorites=[]);return e.recents?(e.recents=p(e.recents),e.recents=e.recents.filter((e=>"JP"!==e.isoCode||u(e.locality)||u(e.region))),e.recents=e.recents.slice(0,d)):void 0===e.recents&&(e.recents=[]),e.followedLocations?e.followedLocations=p(e.followedLocations):e.followedLocations=[],e}function p(e){return h(e,!0)}function g(e){return h(e,!1)}function h(e,t){if(!e)return[];const n=[],o=new Set,i=new Set;for(const a of e){if(!a)continue;const e=(0,r.getDisplayName)(a),c=(0,s.aQ)(a);t&&o.has(e)||i.has(c)||(o.add(e),i.add(c),n.push(a))}return n}function m(e,t,n=l){let o=(0,i.Dx)(e.favorites,t),r=(0,i.Mv)(e.recents,t);return o&&o.length>n&&(o=o.slice(0,n)),r&&r.length>d&&(r=r.slice(0,d)),e.favorites=o,e.recents=r,e}function L(e,t,n=!0){let o=(0,i.Mv)(e.favorites,t),r=e.recents;return n&&(r=(0,i.Dx)(e.recents,t)),o&&o.length>l&&(o=o.slice(0,l)),r&&r.length>d&&(r=r.slice(0,d)),e.favorites=o,e.recents=r,e}function T(e,t){return e.recents=(0,i.Dx)(e.recents,t),f(e)}function y(e,t,n){const o=[];return e&&(o.push(e.home),Array.prototype.push.apply(o,e.favorites||[]),Array.prototype.push.apply(o,e.recents||[])),o.filter((e=>!!e&&e.latitude===t&&e.longitude===n))[0]}function S(e,t){if(!a.jG.isMobile)return[];let n=(0,i.Dx)(e.recentsForMobile,t);const o=d;return n?(n=n.filter((e=>"JP"!==e.isoCode||u(e.locality)||u(e.region))),n=n.slice(0,o)):void 0===n&&(n=[]),C(n),n}function w(){const e=(0,c.$o)().getItem(o.n3);if(e)return JSON.parse(e)}function C(e){(0,c.$o)().supported&&(0,c.$o)().setItem(o.n3,JSON.stringify(e))}}}]);